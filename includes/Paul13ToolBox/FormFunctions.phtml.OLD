<?
/* -------------------------------------------------------------------
INSERTS TEXT INPUT INTO A TABLE
	disName - printed name
	varName - name of field
	varLen - length of text field
	disLen - size of text box
	varVal - value of text field
	strComment - instructions for the field
	special - wildcar for required, currency, etc....
-------------------------------------------------------------------	*/
Function putTextField($disName, $varName, $varLen, $disLen, $varVal, $strComment, $special) {
?>
   <tr valign="middle">
	<td>
	  <div align="right" valign="middle">
	  <? echo $disName;
	  if(ereg("required",$special)){
	  	echo "<font color=\"#FF0000\">*</font>";
	  }
	  ?>

	  </div>
	</td>
	<td>
<?
	if(ereg("currency",$special)){
		echo "$";
	}
	echo "<input type=\"text\" name=\"$varName\" size=\"$disLen\" maxlength=\"$varLen\" value=\"$varVal\"> ";

	echo $strComment;
?>
	</td>
   </tr>
<? }
//END FUNCTION


/* -------------------------------------------------------------------
INSERTS HIDDEN INPUT INTO A TABLE
	disName - printed name
	varName - name of field
	varVal - value of text field
-------------------------------------------------------------------	*/
Function putHiddenField($varName, $varVal) {
?>
	<input type="hidden" name="<?=$varName;?>" value="<?=$varVal;?>">
<? }
//END FUNCTION



/*-------------------------------------------------------------------
 INSERTS password INPUT TO A TABLE
	disName - printed name
	varName - name of field
	varLen - length of password field
	disLen - size of password box
	varVal - value of password field
	disLabel - instructions for the field
-------------------------------------------------------------------*/


Function putPasswordEZ() {
?>
   <tr valign="middle">
	<td>
	  <div align="right">
	  Password<font color="#FF0000">*</font>
	  </div>
	</td>
	<td>
	  <input type="password" name="password" size="10" maxlength="10">
	</td>
   </tr>
<? }
// END FUNCTION

/*-------------------------------------------------------------------
 INSERTS password INPUT TO A TABLE
	disName - printed name
	varName - name of field
	varLen - length of password field
	disLen - size of password box
	varVal - value of password field
	disLabel - instructions for the field
-------------------------------------------------------------------*/


Function putPasswordInput($disName, $varName, $varLen, $disLen, $varVal) {
?>
   <tr valign="middle">
	<td>
	  <div align="right">
	  <? echo $disName; ?>
	  </div>
	</td>
	<td>
	  <input type="password" name="<? echo $varName; ?>" size="<? echo $disLen; ?>" maxlength="<? echo $varLen; ?>" value="<? echo $varVal; ?>">
	  <? echo $disLabel; ?>
	</td>
   </tr>
<? }
// END FUNCTION

/*-------------------------------------------------------------------
 INSERTS text field INPUT TO A TABLE
	disName - printed name
	varName - name of field
	varLen - length of password field
	varRows - # of rows
	varVal - value of field
	disLabel - instructions for the field
	special - wildcard
-------------------------------------------------------------------*/

Function putTextBoxField($disName, $varName, $varLen, $varRows, $varVal,$disLabel, $special) {
?>
   <tr>
	<td   valign="top">
	  <div align="right">
<? 	  echo $disName;
	  if(ereg("required",$special)){
	  	echo "<font color=\"#FF0000\">*</font>";
	  }
?>
	  </div>
	</td>
	<td>
	  <textarea name="<? echo $varName; ?>" cols="<?= $varLen; ?>" rows="<?= $varRows; ?>"><? echo $varVal; ?></textarea>
	  <? echo $disLabel; ?>
	</td>
   </tr>
<? }
// END FUNCTION

/*-------------------------------------------------------------------
 INSERTS text field INPUT TO A TABLE
	disName - printed name
	varName - name of field
	varLen - length of password field
	varRows - # of rows
	varVal - value of field
	disLabel - instructions for the field
	special - wildcard
-------------------------------------------------------------------*/

Function putTextBox($disName, $varName, $varLen, $varRows, $varVal,$disLabel, $special) {
?>
   <tr>
	<td  valign="top">
	  <div align="right" >
<? 	  echo $disName;
	  if(ereg("required",$special)){
	  	echo "<font color=\"#FF0000\">*</font>";
	  }
?>
	  </div>
	</td>
	<td>
	  <textarea name="<? echo $varName; ?>" cols="<?= $varLen; ?>" rows="<?= $varRows; ?>"><? echo $varVal; ?></textarea>
	  <? echo $disLabel; ?>
	</td>
   </tr>
<? }
// END FUNCTION

/*-------------------------------------------------------------------
 INSERTS SELECT INPUT INTO A TABLE
	disName - printed name
	varName - name of field
	disArray - display values [key displayed, value is value]
	varSelected - Passed Value that should be initially selected.  not the displayed value
	disComments - instructions for the field
-------------------------------------------------------------------*/

Function putSelectInput($disName, $varName, $disArray, $varSelected, $strComment, $special) {
?>
   <tr>
	<td   valign="top">
	  <div align="right">
<? 	  echo $disName;
	  if(ereg("required",$special)){
	  	echo "<font color=\"#FF0000\">*</font>";
	  }

?>

	  </div>
	</td>
     <td>

        <select name="<? echo $varName; ?>">
 		<option value=""
<? 		If (!(isset($varSelected))){
			echo "selected";
		}
	echo "></option>";

		while (list ($key, $val) = each ($disArray)) {
			echo "<option value=\"$key\"";
			If ($varSelected == $val){
				echo " selected ";
			}
			echo ">$val </option> \r";
		}
		echo "</select> $strComment</td></tr>\r";
}
// END FUNCTION

/*-------------------------------------------------------------------
 INSERTS Check Box  INTO A TABLE
	disName - printed name
	varName - name of field
	varChecked - is boxed checked variable is either "checked" or blank, and is echoed regardless
	disLabel - instructions for the field
-------------------------------------------------------------------*/

Function putCheckBoxInput($disName, $varName, $varChecked) {
?>
   <tr>
	<td colspan="2">
	  <div align="center">
		<input type="checkbox" name="<? echo $varName; ?>" value="checked" <? echo $varChecked; ?>>&nbsp;&nbsp;
		<?echo $disName ?>
	  </div>
	</td>
   </tr>
<? }
// END FUNCTION

/*-------------------------------------------------------------------	*/
/* puts a row in a 2 column table w/ sumbit button			*/
/*-------------------------------------------------------------------	*/

Function putSubmit() {
?>
	  <tr>
		<td colspan="2">
		  <div align="center">
		    <input type="submit" name="Submit" value="Submit">
		   </div>
		</td>
	  </tr>

<?php
} /* END FUNCTION */


/*-------------------------------------------------------------------	*/
/* puts a row in a 2 column table w/ sumbit and clear buttons		*/
/*-------------------------------------------------------------------	*/

Function putSubmitClear() {
?>
	  <tr>
		<td colspan="2">
		  <div align="center">
		    <input type="submit" name="Submit" value="Submit">
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		    <input type="reset" name="clear" value="Clear">
		   </div>
		</td>
	  </tr>

<?php
} /* END FUNCTION */



/* -------------------------------------------------------------------
INSERTS TEXT INPUT INTO A TABLE
	disName - printed name
	varName - name of field
	varLen - length of text field
	disLen - size of text box
	varVal - value of text field
	strComment - instructions for the field
	special - wildcar for required, currency, etc....
-------------------------------------------------------------------	*/



Function putTextInput($disName, $varName, $varLen, $disLen, $varVal, $strComment, $special) {
?>
   <tr valign="middle">
	<td>
	  <div align="right" valign="middle">
	  <? echo $disName;
	  if(ereg("required",$special)){
	  	echo "<font color=\"#FF0000\">*</font>";
	  }
	  ?>

	  </div>
	</td>
	<td>
<?
	if(ereg("currency",$special)){
		echo "$";
	}
	echo "<input type=\"text\" name=\"$varName\" size=\"$disLen\" maxlength=\"$varLen\" value=\"$varVal\"> ";

	echo $strComment;
?>
	</td>
   </tr>
<? }
//END FUNCTION

/* -------------------------------------------------------------------
INSERTS Date INPUT INTO A TABLE
	disName - printed name
	varName - name of field
	varLen - length of text field
	disLen - size of text box
	varVal - value of text field
	strComment - instructions for the field
	special - wildcar for required, currency, etc....
-------------------------------------------------------------------	*/



Function putDateField($disName, $varName, $varVal, $strComment, $special){
if(isEmpty($disName)){
	$disName = "Date";
}
if(isEmpty($varName)){
	$varName = "date";
}

?>
   <tr valign="middle">
	<td>
	  <div align="right">
<?
	 echo $disName;
	 if(ereg("required",$special)){
	 	echo "<font color=\"#FF0000\">*</font>";
	 }
	 if(!(isEmpty($strComment))){
		echo "<BR>$strComment";
	 }
	 putDateCell($varName);
?>
	  </div>
	</td>
   </tr>
<? }
//END FUNCTION

Function putDateCell($varName) {
?>
	<td>

<? putMonthsSelect($varName);	?>
/
			<select name="<?= $varName; ?>[day]">
			  <option>1</option>
			  <option>2</option>
			  <option>3</option>
			  <option>4</option>
			  <option>5</option>
			  <option>6</option>
			  <option>7</option>
			  <option>8</option>
			  <option>9</option>
			  <option>10</option>
			  <option>11</option>
			  <option>12</option>
			  <option>13</option>
			  <option>14</option>
			  <option selected>15</option>
			  <option>16</option>
			  <option>17</option>
			  <option>18</option>
			  <option>19</option>
			  <option>20</option>
			  <option>21</option>
			  <option>22</option>
			  <option>23</option>
			  <option>24</option>
			  <option>25</option>
			  <option>26</option>
			  <option>27</option>
			  <option>28</option>
			  <option>29</option>
			  <option>30</option>
			  <option>31</option>
			</select>
			/
<? putYearsSelect($varName); ?>


		</font></div>
	</td>
<?
}
//END FUNCTION

/*-------------------------------------------------------------------
Function putMonthsSelect
displays a select list with the months of the year, with todays month 
initially selected. The name of the select list is entered, and [month]
is added to make it part of a date array [month],[day],[year]
	varName - name of the select variable
-------------------------------------------------------------------*/
Function putMonthsSelect($varName){

	echo "<select name=\"$varName";
	if ($varName != "month"){
		echo "[month]";
	}
	echo "\">\r";

	$arDate = getdate();
	$numMonth = $arDate['mon'];  //puts todays month numeric as the month
	$nameMonth = $arDate['month'];
	for($i=1; $i<=12; ++$i){
		if ($i == $numMonth) {
			echo "<option value=\"$i\" selected>";
		} else {
			echo "<option value=\"$i\">";
		}

		echo date ("M", mktime (0,0,0,$i,2,0));
		echo "</option>\r";
	}
	echo "</select>";
}

/*-------------------------------------------------------------------
Function putMonthsSelect
displays a select list with the months of the year, with todays month 
initially selected. The name of the select list is entered, and [month]
is added to make it part of a date array [month],[day],[year]
	varName - name of the select variable
-------------------------------------------------------------------*/
Function putYearsSelect($varName){
	echo "<select name=\"$varName";
	if ($varName != "year"){
		echo "[year]";
	}
	echo "\">\r";
	
	$arDate = getdate();
	$thisyear = $arDate['year'];
	$startyear = $thisyear - 20;
	$endyear = $thisyear + 20;
	
	for($i = $startyear; $i <= $endyear; ++$i){
		if ($i == $thisyear) {
			echo "<option selected>";
		} else {
			echo "<option>";
		}
		echo $i;
		echo "</option>\r";
	}
	echo "</select>";
}
	

	





/*-------------------------------------------------------------------
 INSERTS CheckBoxes INTO A TABLE
	disName - printed name
	varName - name of field array
	disArray - [key array key, value is displayed name]
	varSelecteds - String with Values that should be initially selected.
	intRowLen - number of Boxes before <br>
	strComments - instructions for the field
-------------------------------------------------------------------*/

Function putCheckBoxesInput($disName, $varName, $disArray, $strSelecteds, $intRowLen, $strComment, $special) {
?>
<tr>
	<td>
	  <div align="right" valign="top">
	  <? echo $disName;
	  if(ereg("required",$special)){
	  	echo "<font color=\"#FF0000\">*</font>";
	  }
	  if(!(isEmpty($strComment))){
	  	echo "<BR><font size=\"2\">($strComment)</font>";
	  }
?>

	  </div>
	</td>
	<td>
<?php
	echo "<HR>";
	while(list($key, $field)= each($disArray)){
		echo "$linebreak <input type=\"checkbox\" name=\"$varName" . "[]\" value=\"$key\"";

		// if the value is in varSelected, it chould be selected
//echo "strselecet   $strSelecteds<BR>key   $key<BR>";
		if(stristr("$strSelecteds","$key")){
			echo " checked";
		}
		echo">&nbsp;$field";
		if($i++ % $intRowLen == 0){
			$linebreak = "<BR>\n";
		} else {
			$linebreak = "&nbsp;&nbsp;&nbsp;";
		}

	}
?> &nbsp;
	<HR>
	</td>
</tr>

<?php
}
// end function








/*-------------------------------------------------------------------
getEmptyFields: checks the array $arFields and ensures all fields
	specified by $arMandKeys are not empty.  The keys for empty
	fields are stored and returned in the string $missing
INPUTS $arFields
		$arMandKeys
OUTPUTS	$missing
ASSUMES	ConvertFromNull() is accessable
-------------------------------------------------------------------*/


function getEmptyFields ($arFields, $arMandKeys){
	$missing = "";

/*	loop through array of manditory keys
	check $arFields[$key] to ensure it isn't empty
	if $arFields[$key] is empty, add $key to $missing
*/

//loop through $arMandKeys
	while (list($key,$value) = each($arMandKeys)){

		if(IsEmpty($arFields[$value])){
			$missing = $missing . "$value, ";
		} //if
	}  //while

	if (!(IsEmpty($missing))){
		$missing = substr($missing, 0, -2);
	}

	return $missing;

}	//end of function

/*-------------------------------------------------------------------
getEmptyFields2D: like getEmptyFields except arMandKeys has the variable name
	while the value is the Display name of the field
INPUTS $HTTP_POST_VARS- all of the posted fields,
	$arMandKeys- the fields that must have inputs
OUTPUTS	$missing
ASSUMES	ConvertFromNull() is accessable
-------------------------------------------------------------------*/


function getEmptyFields2D ($arFields, $arMandKeys){
	$missing = "";

/*	loop through array of manditory keys
	check $arFields[$key] to ensure it isn't empty
	if $arFields[$key] is empty, add $Value to $missing
*/

//loop through $arMandKeys
	while (list($key,$value) = each($arMandKeys)){
//echo "<font color=\"#333333\">";
//echo " $key,  $value  $arFields[$key]";
		if(IsEmpty($arFields[$key])){
			$missing = $missing . "$value, ";
//			echo "   $missing";
		} //if
//		echo "<br>";
	}  //while

	if (!(IsEmpty($missing))){
		$missing = substr($missing, 0, -2);
	}
//echo "</font>";
	return $missing;

}	//end of function

?>